### 实验背景
SM4是一种对称加密算法，也被称为国密算法，是中国政府推荐的一种密码算法。它是一种分组密码，输入为128位数据块，输出也为128位。SM4算法使用了32轮迭代来完成加密和解密。由于SM4的迭代次数较多，其加密速度可能受到影响。

为了提高SM4算法的加密速度，决定使用AVX-512指令集来进行SIMD并行加密，以充分利用现代CPU中的SIMD指令集和硬件并行性，从而加速加密过程。

### 实验目的
本实验的目的是优化SM4加密算法，通过使用AVX-512指令集来进行SIMD并行加密，以提高加密速度。我们将比较优化前后的加密速度，并评估优化的效果。

### 实验环境
- 操作系统：Windows 10
- CPU：支持AVX-512指令集的Intel处理器
- 编译器：Visual Studio 2022

### 实验步骤
1. 实现基本的SM4加密算法：首先，我们实现了基本的SM4加密算法，以便后续对比优化前后的性能差异。

2. 使用AVX-512指令集优化SM4算法：我们修改了SM4加密算法的代码，引入了AVX-512指令集的SIMD并行加密，以利用硬件并行性提高加密速度。优化后的代码使用了AVX-512指令集的并行计算能力，从而同时处理多个数据块。

3. 编译和运行：我们使用Visual Studio 2019编译优化后的代码，并在支持AVX-512指令集的Intel处理器上运行。

4. 性能测试：我们对比了优化前后的加密速度。测试数据集采用了多个不同大小的数据块，包括小规模和大规模的输入。

### 实验结果
通过性能测试，我们得到了优化前后的加密速度。在支持AVX-512指令集的硬件上，优化后的SM4加密算法明显比优化前的版本更快。
<img width="176" alt="sm4" src="https://github.com/wavteirv/courseproject/assets/102475494/8cf231d1-68b4-4aa8-ba33-e0ed7d498133">

<img width="113" alt="sm42" src="https://github.com/wavteirv/courseproject/assets/102475494/c86781dd-9f44-4fe1-a0c5-0f25ab96840f">



### 结论
通过使用AVX-512指令集进行SIMD并行加密，我们成功优化了SM4加密算法，提高了加密速度。优化后的代码在支持AVX-512的硬件上表现出色，并且可以在大规模数据集上加速加密过程。这种优化可以在要求高性能的场景中使用，例如大规模数据加密和数据安全应用。然而，在部分不支持AVX-512指令集的硬件上，优化后的代码可能不会带来性能提升，因此在实际应用中需要进行硬件兼容性考虑。

### 局限性和未来工作
优化过程主要关注了使用AVX-512指令集进行SIMD并行加密的效果。然而，优化算法的性能还受到其他因素的影响，如内存访问模式、编译器优化等。未来工作可以进一步探索其他优化策略，比如使用更高级别的指令集和优化算法的数据布局。

此外，由于SM4算法涉及到数据安全和密码学等领域，优化过程也需要进行充分的安全审计和测试，以确保代码的正确性和安全性。
